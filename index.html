<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">

	<title>Ruby迷-关注Ruby,Rails开发技术博客</title>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有文章" href="http://rubyer.me/feed">
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有评论" href="http://rubyer.me/comments/feed">
	<link rel="pingback" href="http://rubyer.me/xmlrpc.php">

	<!-- style START -->
	<style type="text/css" media="screen">@import url( http://rubyer.me/wp-content/themes/blocks2/style.css );</style>
			<link rel="stylesheet" href="http://rubyer.me/wp-content/themes/blocks2/chinese.css" type="text/css" media="screen">
		<!--[if IE]>
		<link rel="stylesheet" href="http://rubyer.me/wp-content/themes/blocks2/ie.css" type="text/css" media="screen" />
	<![endif]-->
	<!-- style END -->

	<!-- script START -->
	
	
	<!-- script END -->

		<link rel="stylesheet" id="wp-pagenavi-css" href="http://rubyer.me/wp-content/themes/blocks2/pagenavi-css.css?ver=2.70" type="text/css" media="all">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://rubyer.me/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://rubyer.me/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 3.3.1">

<!-- All in One SEO Pack 1.6.14.2 by Michael Torbert of Semper Fi Web Design[326,340] -->
<meta name="description" content="Ruby迷，是一个专注于Ruby、Ruby on Rails、Ruby off Rails、Ruby框架、国外技术文章翻译等的原创Ruby技术博客，作者老宋（oldsong）。">
<meta name="keywords" content="Ruby, Rails, Ruby博客, ROR, Ruby on Rails, Ruby ide, Ruby Rails教程, Ruby Rails框架, Ruby Rails安装">
<link rel="canonical" href="http://rubyer.me/">
<!-- /all in one seo pack -->
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>

<!-- Wordpress Popular Posts v2.2.1 -->
<link rel="stylesheet" href="http://rubyer.me/wp-content/plugins/wordpress-popular-posts/style/wpp.css" type="text/css" media="screen">
<!-- End Wordpress Popular Posts v2.2.1 -->

<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3">


</head>
<body>


<style>
#alert-main-top {
    width: 100%;
    height: 800px;
    background: #333;
    color: #ddd;
    overflow: hidden;
}
#alert-main {
    width: 700px;
    text-align: center;
    margin: 20px auto;
}


#alert-main .footer {
    width: 700px;
    text-align: center;
    margin: 20px auto;
}

#alert-main #pic {
    border: 5px solid #fff;
    border-radius: 10px;
}

#alert-main #info {
    margin-top: 30px;
    font-size: 21pt;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.3);
}

#alert-main a {
    color: #ddd;
    text-decoration: none;
}

#alert-main a:visited {
    color: #ddd;
}

#alert-main a:hover {
    color: #fff;
}
</style>
<script src="./jquery.js" type="text/javascript"></script> 

<script type="text/javascript">
	setTimeout(function(){
		$('html body').animate({scrollTop:"800px"});
	}, 3000);

</script>


<div id="alert-main-top">
<div id="alert-main">
<img id="pic" src="down.png"><div id="info">
<a href="http://ruby-china.org/topics/2459">数据库丢失，目前全为快照恢复静态页面，暂不能评论。新博客正在开发中，老宋谢谢您的关注 &gt;_&lt;</a>
</div>
<div class="footer">如发现访问不到的页面，请与我联系<a href="mailto:neosoyn@gmail.com">: Email</a><br/>
	Thanks to <a href="https://github.com/camelsong">Github & <a href="http://ruby-china.org">Ruby-china</a></a>
</div>
</div>
</div>


	<div id="wrap">
		<div id="container">

<!-- header START -->
<div id="header">
	<div id="title">
		<h1><a href="http://rubyer.me/">Ruby迷</a></h1>
		<div id="tagline">spend less, do more</div>
	</div>

	<!-- WordPress searchbox -->
	<div class="searchbox">
		<form action="http://rubyer.me/" method="get">
			<div class="content">
				<input type="text" class="textfield" name="s" size="24" value="">
				<input type="submit" class="button" value="搜索">
			</div>
		</form>
	</div>

	<div class="fixed"></div>
</div>
<!-- header END -->

<!-- content START -->
<div id="content">

	<!-- menubar START -->
	<div id="navigation">
		<ul id="menubar">
			<li class="current_page_item"><a title="首页" href="http://rubyer.me/">首页</a></li>
				<li class="cat-item cat-item-6"><a href="http://rubyer.me/blog/category/rails" title="查看 Rails 下的所有文章">Rails</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://rubyer.me/blog/category/ruby" title="查看 Ruby 下的所有文章">Ruby</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://rubyer.me/blog/category/linux-mac" title="查看 Linux/Mac 下的所有文章">Linux/Mac</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://rubyer.me/blog/category/no" title="查看 其它 下的所有文章">其它</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://rubyer.me/blog/category/ruby-install" title="查看 ROR安装 下的所有文章">ROR安装</a>
</li>
	<li class="cat-item cat-item-103"><a href="http://rubyer.me/blog/category/ruby-diary" title="查看 一日一技 下的所有文章">一日一技</a>
</li>
                        <li><a href="http://rubyer.me/about">关于我</a></li>
		</ul>
		<div id="subscribe" class="feed">
			<a title="订阅这个博客的文章" class="feedlink" href="http://rubyer.me/feed"><abbr title="Really Simple Syndication">RSS</abbr> 订阅</a>
							<ul>
					<li><a rel="external nofollow" title="订阅到鲜果" href="http://www.xianguo.com/subscribe.php?url=http://rubyer.me/feed">					鲜果	</a></li>
					<li><a rel="external nofollow" title="订阅到抓虾" href="http://www.zhuaxia.com/add_channel.php?url=http://rubyer.me/feed">					抓虾	</a></li>
					<li><a rel="external nofollow" title="订阅到有道" href="http://reader.yodao.com/#url=http://rubyer.me/feed">								有道	</a></li>
					<li><a rel="external nofollow" title="订阅到 Google" href="http://fusion.google.com/add?feedurl=http://rubyer.me/feed">						 Google	</a></li>
					<li><a rel="external nofollow" title="订阅到 netvibes" href="http://www.netvibes.com/subscribe.php?url=http://rubyer.me/feed">					 netvibes	</a></li>
					<li><a rel="external nofollow" title="订阅到 newsgator" href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://rubyer.me/feed">	 newsgator</a></li>
					<li><a rel="external nofollow" title="订阅到 Bloglines" href="http://www.bloglines.com/sub/http://rubyer.me/feed">								 Bloglines</a></li>
					<li><a rel="external nofollow" title="订阅到哪吒" href="http://inezha.com/add?url=http://rubyer.me/feed">									哪吒	</a></li>
				</ul>
					</div>
				
		<span id="copyright">
			&#169; 2011-2012 Ruby迷		</span>
		<div class="fixed"></div>
	</div>
	<!-- menubar END -->

	<!-- main START -->
	<div id="main">


	<div class="post" id="post-1695">
	<h2 class="title"><a href="http://rubyer.me/blog/1695" rel="bookmark">bundle outdated查看可更新的gems</a></h2>
	<div class="meta">
		<div class="info">
			四 5th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1695#respond" title="《bundle outdated查看可更新的gems》上的评论">没有评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>以前每次升级旧项目就直接‘bundle update’，但此前并不知道究竟会升级哪些gems，只有升级后用’gem diff Gemfile.lock’才知道。</p>
<p>Bundler 1.1新增了bundle outdated命令，用来显示Gemfile.lock中哪些gems有新版本，并显示新旧版本号。</p>
<p>这个是我执行后的结果，就类似这样：</p>
<pre class="brush: plain; title: ; notranslate" title="">&#65533;7&#65533;4  ~/railsapp/demo bundle outdated
Fetching gem metadata from https://rubygems.org/........

Outdated gems included in the bundle:
  * multi_json (1.2.0 &gt; 1.1.0)
  * activesupport (3.2.3 &gt; 3.2.2)
  * activemodel (3.2.3 &gt; 3.2.2)
  * sprockets (2.4.0 &gt; 2.1.2)
  * actionpack (3.2.3 &gt; 3.2.2)
  * actionmailer (3.2.3 &gt; 3.2.2)
  * activerecord (3.2.3 &gt; 3.2.2)
  * activeresource (3.2.3 &gt; 3.2.2)
  * json (1.6.6 &gt; 1.6.5)
  * railties (3.2.3 &gt; 3.2.2)
  * rails (3.2.3 &gt; 3.2.2)
  * bootstrap-will_paginate (0.0.7 &gt; 0.0.6)
  * chinese_pinyin (0.4.1 &gt; 0.3.0)
  * orm_adapter (0.0.7 &gt; 0.0.6)
  * guard-rspec (0.7.0 &gt; 0.6.0)
  * guard-spork (0.6.0 &gt; 0.5.2)
  * jquery-rails (2.0.2 &gt; 2.0.1)
  * therubyracer (0.10.0 &gt; 0.9.10)
  * less (2.1.0 &gt; 2.0.11)
  * less-rails (2.2.0 &gt; 2.1.8)
  * rspec-expectations (2.9.1 &gt; 2.9.0)
  * twitter-bootstrap-rails (2.0.5 &gt; 2.0.4)
  * uglifier (1.2.4 &gt; 1.2.3)
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/gem" rel="tag">gem</a></div>
			</div>
</div>
	<div class="post" id="post-1693">
	<h2 class="title"><a href="http://rubyer.me/blog/1693" rel="bookmark">Mac OS X中隐藏Spotlight 图标</a></h2>
	<div class="meta">
		<div class="info">
			四 4th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1693#respond" title="《Mac OS X中隐藏Spotlight 图标》上的评论">没有评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>相信很多朋友和我一样，自从用了Alfred后，就很少用Spotlight了。它的图标还占着位置就觉得不爽，但是不能通过设置来隐藏，我们要自己做点小hack才行。</p>
<pre class="brush: bash; title: ; notranslate" title="">sudo chmod 600 /System/Library/CoreServices/Search.bundle/Contents/MacOS/Search
killall SystemUIServer     ＃重启killall SystemUIServer服务来刷新顶栏
</pre>
<p>怀念Spotlight了？恢复也很简单</p>
<pre class="brush: bash; title: ; notranslate" title="">sudo chmod 755 /System/Library/CoreServices/Search.bundle/Contents/MacOS/Search
killall SystemUIServer     ＃重启killall SystemUIServer服务来刷新顶栏
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/mac" rel="tag">Mac</a>, <a href="http://rubyer.me/blog/tag/spotlight" rel="tag">Spotlight</a></div>
			</div>
</div>
	<div class="post" id="post-1682">
	<h2 class="title"><a href="http://rubyer.me/blog/1682" rel="bookmark">Linux下的NFS配置</a></h2>
	<div class="meta">
		<div class="info">
			三 22nd, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1682#respond" title="《Linux下的NFS配置》上的评论">没有评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>虽然这种文章网上一堆，但我还是记录一下。</p>
<h3>1. NFS介绍</h3>
<p>NFS是Network File System的简写，即网络文件系统。NFS允许一个系统在网络上与它人共享目录和文件。</p>
<h3>2. 安装</h3>
<pre class="brush: bash; title: ; notranslate" title="">sudo apt-get install portmap			#这个客户端和服务器都需要，是网络传输协议。
sudo apt-get install nfs-kernel-server	#在服务器上安装nfs，客户端不需要。
</pre>
<h3>3. 服务器端配置</h3>
<pre class="brush: bash; title: ; notranslate" title="">vi /etc/export
</pre>
<p>添加：</p>
<pre class="brush: plain; title: ; notranslate" title="">/home/nfs/share       *(ro,sync)				#允许所有ip的读权限
/home/nfs/share       192.168.1.8(rw,sync,no_root_squas)		#只允许我写ip访问
</pre>
<p>其中：</p>
<blockquote><p>/home/nfs/share是服务器要共享的目录<br>
*代表所有ip<br>
rw为读写，ro为只读<br>
sync为立刻写入硬盘，rsync为先写入缓存<br>
no_all_squash           保留共享文件的UID和GID（默认）<br>
root_squash             root用户的所有请求映射成如anonymous用户一样的权限（默认）<br>
no_root_squas           root用户具有根目录的完全管理访问权限（这个如果不配置会造成远程root用户只读）
</p></blockquote>
<h3>4. 启动服务器</h3>
<pre class="brush: bash; title: ; notranslate" title="">/etc/init.d/nfs-kernel-server start
chkconfig nfs-kernel-server on			#设置nfs开机自动启动
</pre>
<h3>5. 客户端挂载</h3>
<pre class="brush: bash; title: ; notranslate" title="">mount 192.168.1.1:/home/nfs/share    /mnt/nfs1    #192.168.1.1为服务器ip，挂载到本地/mnt/nfs1目录
umount /mnt/nfs1    					#取消挂载
</pre>
<p>在/etc/rc.local中添加“mount 192.168.1.1:/home/nfs/share    /mnt/nfs1”可实现开机自动挂载。</p>
<h3>我遇到的一个问题</h3>
<p>在客户端root登录后对共享目录只读。<br>
解法：<br>
在服务器的/etc/export配置文件中加上”no_root_squas”。因为默认为”root-squas”，即默认客户端的root会被映射成匿名用户。</p>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/nfs" rel="tag">nfs</a></div>
			</div>
</div>
	<div class="post" id="post-1661">
	<h2 class="title"><a href="http://rubyer.me/blog/1661" rel="bookmark">Rails 开发环境日志过大时自动清理</a></h2>
	<div class="meta">
		<div class="info">
			三 16th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1661#respond" title="《Rails 开发环境日志过大时自动清理》上的评论">没有评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>新建文件：config/initializers/clear_logs.rb</p>
<h3>例：开发模式下当日志大于10m时自动清理</h3>
<pre class="brush: ruby; title: ; notranslate" title=""># config/initializers/clear_logs.rb
if Rails.env.development?
  MAX_LOG_SIZE = 10.megabytes

  logs = [ File.join(Rails.root, 'log', 'development.log'), File.join(Rails.root, 'log', 'test.log') ]

  logs.each do |log|
    if File.size?(log).to_i &gt; MAX_LOG_SIZE
      $stdout.puts "Removing Log: #{log}"
      `rm #{log}`
    end
  end
end
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/logger" rel="tag">logger</a>, <a href="http://rubyer.me/blog/tag/%e6%97%a5%e5%bf%97" rel="tag">日志</a></div>
			</div>
</div>
	<div class="post" id="post-1641">
	<h2 class="title"><a href="http://rubyer.me/blog/1641" rel="bookmark">reverse_merge为方法设置默认参数的技巧</a></h2>
	<div class="meta">
		<div class="info">
			三 14th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1641#comments" title="《reverse_merge为方法设置默认参数的技巧》上的评论">2 条评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>先来看一下hash的merge方法。</p>
<pre class="brush: ruby; title: ; notranslate" title="">h1 = { "a" =&gt; 100, "b" =&gt; 200 }
h2 = { "b" =&gt; 254, "c" =&gt; 300 }
h1.merge(h2)   #=&gt; {"a"=&gt;100, "b"=&gt;254, "c"=&gt;300}
h1             #=&gt; {"a"=&gt;100, "b"=&gt;200}
</pre>
<p><a href="http://api.rubyonrails.org/classes/Hash.html#method-i-reverse_merge" target="_blank">reverse_merge</a>的作用与merge正好相反，merge时后面的优先级高，reverse_merge时前面hash的优先级高。<br>
注意：这个方法是rails的activesupport提供的，不是ruby自带的方法。</p>
<h3>reverse_merge最常见的用处就是在rails中为方法的hash参数设置默认值。</h3>
<p>下面来个示例。<br>
给Partials中Locals参数设置默认值</p>
<pre class="brush: ruby; title: ; notranslate" title=""># erb中
&lt;%= display_product @product, :show_price =&gt; true %&gt;
</pre>
<pre class="brush: ruby; title: ; notranslate" title=""># helper中
def display_product(product, locals = {})
  locals.reverse_merge! :show_price =&gt; false
  render :partial =&gt; product, :locals =&gt; locals
end
</pre>
<p>上面的方法是推荐的方法，比较好，如果你觉得太麻烦，也可以用一些hack的方法，有点ugly。</p>
<p>在erb中直接</p>
<pre class="brush: ruby; title: ; notranslate" title="">locals: { show_price: defined?(show_price) ? show_price : false }
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/railstips" rel="tag">railstips</a></div>
			</div>
</div>
	<div class="post" id="post-1669">
	<h2 class="title"><a href="http://rubyer.me/blog/1669" rel="bookmark">让Ruby一个函数返回多个值</a></h2>
	<div class="meta">
		<div class="info">
			三 14th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1669#comments" title="《让Ruby一个函数返回多个值》上的评论">3 条评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>ruby的
</p><pre class="brush: plain; title: ; notranslate" title="">x, y = "a", "b"</pre>
<p>语法真的很帅，有时一个函数需要返回多个值，两个结合可以写出很帅的代码。</p>
<p>如需要定义一个方法同时返回最大值max和最小值min：</p>
<pre class="brush: ruby; title: ; notranslate" title="">class MyClass
 def some_method
   ["max", "min"]
 end
end
</pre>
<p>调用方法：</p>
<pre class="brush: ruby; title: ; notranslate" title="">max, min = MyClass.new.some_method
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/railstips" rel="tag">railstips</a></div>
			</div>
</div>
	<div class="post" id="post-1637">
	<h2 class="title"><a href="http://rubyer.me/blog/1637" rel="bookmark">ERB中&lt;% ... -%&gt; 与 &lt;% ... %&gt;的不同</a></h2>
	<div class="meta">
		<div class="info">
			三 12th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1637#comments" title="《ERB中 与 的不同》上的评论">1 条评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>加-的作用是在标签结束后不输出空行。<br>
如：</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;div&gt;
&lt;% if true -%&gt;
  Hi
&lt;% end -%&gt;
&lt;/div&gt;</pre>
<p>会输出</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;div&gt;
Hi
&lt;/div&gt;
</pre>
<p>如果不加-会输出</p>
<pre class="brush: xml; title: ; notranslate" title="">&lt;div&gt;  

Hi

&lt;/div&gt;
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/erb" rel="tag">ERB</a>, <a href="http://rubyer.me/blog/tag/view" rel="tag">view</a></div>
			</div>
</div>
	<div class="post" id="post-1632">
	<h2 class="title"><a href="http://rubyer.me/blog/1632" rel="bookmark">content_for与provider的比较</a></h2>
	<div class="meta">
		<div class="info">
			三 12th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1632#respond" title="《content_for与provider的比较》上的评论">没有评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>我们知道erb模板向layout传值最好的方法是用content_for。<br>
方法如下：</p>
<pre class="brush: ruby; title: ; notranslate" title="">#/app/views/layouts/application.html.erb
&lt;title&gt;&lt;%= yield :title %&gt;&lt;/title&gt;

#/app/views/projects/index.html.erb
&lt;% content_for :title, "Projects" %&gt; 
</pre>
<p>今天才注意到从rails 3.1开始增加了provide方法。</p>
<pre class="brush: ruby; title: ; notranslate" title="">#/app/views/projects/index.html.erb
&lt;% provide :title, "Projects" %&gt;
</pre>
<p>如果你不用rails 3.1的新特性http streaming，content_for与provider作用基本相当。区别在于使用htp streaming时provider会在渲染页面时首先执行。而content_for是顺序执行，而且content_for会把多个结果拼接到一起后返回，所以当执行到第一个content_for是并不能立即返回，页面还在试图寻找有没有其它content_for。不能起来http streaming的效果。</p>
<p>具体参考：http://asciicasts.com/episodes/266-http-streaming</p>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/rails-3-1" rel="tag">rails 3.1</a></div>
			</div>
</div>
	<div class="post" id="post-1623">
	<h2 class="title"><a href="http://rubyer.me/blog/1623" rel="bookmark">让git彩色显示</a></h2>
	<div class="meta">
		<div class="info">
			三 10th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1623#comments" title="《让git彩色显示》上的评论">3 条评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>新装的系统，不知为啥，”git diff, git status”默认单色显示，看起来很不直观。于是查了下资料，配置一下即可。<br>
先来张效果图：<br>
<a href="http://rubyer.me/wp-content/uploads/2012/03/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2012-03-09-%E4%B8%8B%E5%8D%886.27.40.png"><img src="http://rubyer.me/wp-content/uploads/2012/03/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2012-03-09-%E4%B8%8B%E5%8D%886.27.40.png" alt="" title="git-diff-with-color" width="462" height="440" class="alignnone size-full wp-image-1624"></a></p>
<h3>配置命令：</h3>
<pre class="brush: bash; title: ; notranslate" title="">git config --global color.diff auto
git config --global color.status auto
git config --global color.branch auto
git config --global color.interactive auto
git config --global color.ui auto
</pre>
<p>也可以直接编辑~/.gitconfig，其实上面的命令就是往这个文件中添加了这些配置项。</p>
<pre class="brush: plain; title: ; notranslate" title="">[color]
    diff = auto
    branch = auto
    status = auto
    interactive = auto
</pre>
<h3>查看自己都有哪些配置</h3>
<pre class="brush: bash; title: ; notranslate" title="">git config --list
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: <a href="http://rubyer.me/blog/tag/git" rel="tag">git</a></div>
			</div>
</div>
	<div class="post" id="post-1613">
	<h2 class="title"><a href="http://rubyer.me/blog/1613" rel="bookmark">Linux查找和替换目录下所有文件中字符串</a></h2>
	<div class="meta">
		<div class="info">
			三 9th, 2012								</div>
		<div class="comments">
			<a href="http://rubyer.me/blog/1613#respond" title="《Linux查找和替换目录下所有文件中字符串》上的评论">没有评论</a>		</div>
		<div class="fixed"></div>
	</div>

	<div class="content">
		<p>单个文件中查找替换很简单，就不说了。文件夹下所有文件中字符串的查找替换就要记忆了，最近部署几十台linux服务器，记录下总结。</p>
<h3>查找文件夹下包含字符串的文件</h3>
<p>例：查找/usr/local目录下所有包含”rubyer.me”的文件。</p>
<pre class="brush: bash; title: ; notranslate" title="">grep -lr 'rubyer.me' /usr/local/*
</pre>
<h3>vim替换单个文件中所有字符串方法</h3>
<p>例：替换当前文件中所有old为new</p>
<pre class="brush: bash; title: ; notranslate" title="">:%s/old/new/g
#%表示替换说有行，g表示替换一行中所有匹配点。
</pre>
<h3>替换文件夹下包含字符串的文件</h3>
<p>sed结合grep<br>
例：要将目录/www下面所有文件中的zhangsan都修改成lisi，这样做：</p>
<pre class="brush: bash; title: ; notranslate" title="">sed -i "s/old/new/g" `grep old -rl /www`
</pre>
		<div class="fixed"></div>
					<div class="tags">标签: </div>
			</div>
</div>
	

<div id="pagenavi">
			<div class="wp-pagenavi">
<span class="pages">第 1 页，共 16 页</span><span class="current">1</span><a href="http://rubyer.me/page/2" class="page larger">2</a><a href="http://rubyer.me/page/3" class="page larger">3</a><a href="http://rubyer.me/page/4" class="page larger">4</a><a href="http://rubyer.me/page/5" class="page larger">5</a><span class="extend">...</span><a href="http://rubyer.me/page/10" class="larger page">10</a><span class="extend">...</span><a href="http://rubyer.me/page/2" class="nextpostslink">&#187;</a><a href="http://rubyer.me/page/16" class="last">最旧 &#187;</a>
</div>		<div class="fixed"></div>
</div>

	</div>
	<!-- main END -->

		
<!-- sidebar START -->
<div id="sidebar">

	<!-- showcase -->
	
<!-- Wordpress Popular Posts Plugin v2.2.1 [W] [weekly] [regular] -->
<div class="widget popular-posts">
<h3>最受欢迎</h3><ul>
<li><a href="http://rubyer.me/blog/134" title="windows下安装DevKit"><span class="wpp-post-title">windows下安装DevKit</span></a> </li>
<li><a href="http://rubyer.me/blog/757" title="常用原型图设计工具Balsamiq Mockups、Axure RP、Pencil对比"><span class="wpp-post-title">常用原型图设计工具Balsamiq Mockups、Axure RP、Pencil对比</span></a> </li>
<li><a href="http://rubyer.me/blog/84" title="ROR开发IDE比较：Aptana Studio、RubyMine、NetBeans"><span class="wpp-post-title">ROR开发IDE比较：Aptana Studio、RubyMine、NetBeans</span></a> </li>
<li><a href="http://rubyer.me/blog/1509" title="Windows下安装Ruby on Rails最简单的方法"><span class="wpp-post-title">Windows下安装Ruby on Rails最简单的方法</span></a> </li>
<li><a href="http://rubyer.me/blog/999" title="创建基于Rails 3的纯净Ajax CRUD程序"><span class="wpp-post-title">创建基于Rails 3的纯净Ajax CRUD程序</span></a> </li>
<li><a href="http://rubyer.me/blog/638" title="Ubuntu Linux下安装 Redis 并配置开机启动"><span class="wpp-post-title">Ubuntu Linux下安装 Redis 并配置开机启动</span></a> </li>
<li><a href="http://rubyer.me/blog/1558" title="RubyMine 4正式版发布，知名的Ruby IDE"><span class="wpp-post-title">RubyMine 4正式版发布，知名的Ruby IDE</span></a> </li>
<li><a href="http://rubyer.me/about" title="关于老宋"><span class="wpp-post-title">关于老宋</span></a> </li>
<li><a href="http://rubyer.me/blog/941" title="提高rails new时bundle install运行速度"><span class="wpp-post-title">提高rails new时bundle install运行速度</span></a> </li>
<li><a href="http://rubyer.me/blog/1148" title="Macbook Pro试用一周手记"><span class="wpp-post-title">Macbook Pro试用一周手记</span></a> </li>

</ul>
</div>
<!-- End Wordpress Popular Posts Plugin v2.2.1 -->
		<div class="widget widget_recent_entries">		<h3>最新文章</h3>		<ul>
				<li><a href="http://rubyer.me/blog/1695" title="bundle outdated查看可更新的gems">bundle outdated查看可更新的gems</a></li>
				<li><a href="http://rubyer.me/blog/1693" title="Mac OS X中隐藏Spotlight 图标">Mac OS X中隐藏Spotlight 图标</a></li>
				<li><a href="http://rubyer.me/blog/1682" title="Linux下的NFS配置">Linux下的NFS配置</a></li>
				<li><a href="http://rubyer.me/blog/1661" title="Rails 开发环境日志过大时自动清理">Rails 开发环境日志过大时自动清理</a></li>
				<li><a href="http://rubyer.me/blog/1641" title="reverse_merge为方法设置默认参数的技巧">reverse_merge为方法设置默认参数的技巧</a></li>
				</ul>
		</div><div class="widget widget_tag_cloud"><h3>标签</h3><div class="tagcloud"><a href="http://rubyer.me/blog/tag/active-record" class="tag-link-53" title="6 个话题" style="font-size: 13.029126213592pt;">Active Record</a>
<a href="http://rubyer.me/blog/tag/assets-pipeline" class="tag-link-63" title="2 个话题" style="font-size: 8pt;">Assets Pipeline</a>
<a href="http://rubyer.me/blog/tag/authentication" class="tag-link-87" title="2 个话题" style="font-size: 8pt;">Authentication</a>
<a href="http://rubyer.me/blog/tag/bundle" class="tag-link-55" title="3 个话题" style="font-size: 9.631067961165pt;">bundle</a>
<a href="http://rubyer.me/blog/tag/csdn" class="tag-link-163" title="3 个话题" style="font-size: 9.631067961165pt;">CSDN</a>
<a href="http://rubyer.me/blog/tag/debug" class="tag-link-106" title="3 个话题" style="font-size: 9.631067961165pt;">debug</a>
<a href="http://rubyer.me/blog/tag/gem" class="tag-link-82" title="4 个话题" style="font-size: 10.990291262136pt;">gem</a>
<a href="http://rubyer.me/blog/tag/git" class="tag-link-79" title="6 个话题" style="font-size: 13.029126213592pt;">git</a>
<a href="http://rubyer.me/blog/tag/has_secure_password" class="tag-link-89" title="2 个话题" style="font-size: 8pt;">has_secure_password</a>
<a href="http://rubyer.me/blog/tag/ide" class="tag-link-43" title="4 个话题" style="font-size: 10.990291262136pt;">IDE</a>
<a href="http://rubyer.me/blog/tag/javascript" class="tag-link-37" title="2 个话题" style="font-size: 8pt;">javascript</a>
<a href="http://rubyer.me/blog/tag/jquery" class="tag-link-50" title="5 个话题" style="font-size: 12.077669902913pt;">jQuery</a>
<a href="http://rubyer.me/blog/tag/linux-2" class="tag-link-41" title="11 个话题" style="font-size: 16.155339805825pt;">Linux</a>
<a href="http://rubyer.me/blog/tag/mongodb" class="tag-link-21" title="3 个话题" style="font-size: 9.631067961165pt;">MongoDB</a>
<a href="http://rubyer.me/blog/tag/nginx" class="tag-link-47" title="2 个话题" style="font-size: 8pt;">Nginx</a>
<a href="http://rubyer.me/blog/tag/nokogiri" class="tag-link-45" title="3 个话题" style="font-size: 9.631067961165pt;">nokogiri</a>
<a href="http://rubyer.me/blog/tag/nosql" class="tag-link-20" title="4 个话题" style="font-size: 10.990291262136pt;">nosql</a>
<a href="http://rubyer.me/blog/tag/putty" class="tag-link-74" title="3 个话题" style="font-size: 9.631067961165pt;">putty</a>
<a href="http://rubyer.me/blog/tag/rails-label" class="tag-link-35" title="31 个话题" style="font-size: 22pt;">Rails</a>
<a href="http://rubyer.me/blog/tag/rails-3-1" class="tag-link-88" title="5 个话题" style="font-size: 12.077669902913pt;">rails 3.1</a>
<a href="http://rubyer.me/blog/tag/rails-routing%e8%b7%af%e7%94%b1" class="tag-link-61" title="2 个话题" style="font-size: 8pt;">Rails Routing路由</a>
<a href="http://rubyer.me/blog/tag/railstips" class="tag-link-178" title="3 个话题" style="font-size: 9.631067961165pt;">railstips</a>
<a href="http://rubyer.me/blog/tag/rails%e5%93%b2%e5%ad%a6" class="tag-link-33" title="2 个话题" style="font-size: 8pt;">Rails哲学</a>
<a href="http://rubyer.me/blog/tag/rails%e6%8a%80%e5%b7%a7" class="tag-link-40" title="9 个话题" style="font-size: 15.067961165049pt;">Rails技巧</a>
<a href="http://rubyer.me/blog/tag/rails-trick" class="tag-link-31" title="7 个话题" style="font-size: 13.708737864078pt;">Rails插件</a>
<a href="http://rubyer.me/blog/tag/rails%e6%96%b0%e9%97%bb" class="tag-link-42" title="3 个话题" style="font-size: 9.631067961165pt;">Rails新闻</a>
<a href="http://rubyer.me/blog/tag/rails%e9%94%99%e8%af%af" class="tag-link-28" title="7 个话题" style="font-size: 13.708737864078pt;">Rails错误</a>
<a href="http://rubyer.me/blog/tag/redhat" class="tag-link-78" title="2 个话题" style="font-size: 8pt;">redhat</a>
<a href="http://rubyer.me/blog/tag/rspec" class="tag-link-137" title="4 个话题" style="font-size: 10.990291262136pt;">RSpec</a>
<a href="http://rubyer.me/blog/tag/ruby-label" class="tag-link-34" title="22 个话题" style="font-size: 19.961165048544pt;">Ruby</a>
<a href="http://rubyer.me/blog/tag/rubygems" class="tag-link-165" title="6 个话题" style="font-size: 13.029126213592pt;">Rubygems</a>
<a href="http://rubyer.me/blog/tag/rubymine" class="tag-link-57" title="3 个话题" style="font-size: 9.631067961165pt;">Rubymine</a>
<a href="http://rubyer.me/blog/tag/rvm" class="tag-link-77" title="4 个话题" style="font-size: 10.990291262136pt;">rvm</a>
<a href="http://rubyer.me/blog/tag/sinatra" class="tag-link-167" title="3 个话题" style="font-size: 9.631067961165pt;">Sinatra</a>
<a href="http://rubyer.me/blog/tag/sqlite3" class="tag-link-80" title="2 个话题" style="font-size: 8pt;">sqlite3</a>
<a href="http://rubyer.me/blog/tag/ubuntu" class="tag-link-65" title="4 个话题" style="font-size: 10.990291262136pt;">ubuntu</a>
<a href="http://rubyer.me/blog/tag/view" class="tag-link-71" title="2 个话题" style="font-size: 8pt;">view</a>
<a href="http://rubyer.me/blog/tag/vim" class="tag-link-76" title="3 个话题" style="font-size: 9.631067961165pt;">vim</a>
<a href="http://rubyer.me/blog/tag/%e5%88%86%e9%a1%b5" class="tag-link-17" title="2 个话题" style="font-size: 8pt;">分页</a>
<a href="http://rubyer.me/blog/tag/%e5%bc%95%e7%94%a8" class="tag-link-69" title="2 个话题" style="font-size: 8pt;">引用</a>
<a href="http://rubyer.me/blog/tag/%e6%9d%be%e6%9c%ac%e8%a1%8c%e5%bc%98%e7%9a%84%e7%a8%8b%e5%ba%8f%e4%b8%96%e7%95%8c" class="tag-link-133" title="4 个话题" style="font-size: 10.990291262136pt;">松本行弘的程序世界</a>
<a href="http://rubyer.me/blog/tag/%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86" class="tag-link-67" title="3 个话题" style="font-size: 9.631067961165pt;">版本管理</a>
<a href="http://rubyer.me/blog/tag/%e7%8e%a9" class="tag-link-39" title="2 个话题" style="font-size: 8pt;">玩</a>
<a href="http://rubyer.me/blog/tag/%e7%bf%bb%e8%af%91" class="tag-link-14" title="8 个话题" style="font-size: 14.388349514563pt;">翻译</a>
<a href="http://rubyer.me/blog/tag/%e8%bf%90%e7%ae%97%e7%ac%a6" class="tag-link-66" title="2 个话题" style="font-size: 8pt;">运算符</a></div>
</div><div class="widget widget_recent_comments"><h3>近期评论</h3><ul id="recentcomments"><li class="recentcomments"><a href="http://400hao.cn/" rel="external nofollow" class="url">宁卫</a> 发表在《<a href="http://rubyer.me/blog/461/comment-page-1#comment-1158">非WEB程序中使用Active Record</a>》</li><li class="recentcomments">老宋 发表在《<a href="http://rubyer.me/blog/461/comment-page-1#comment-1157">非WEB程序中使用Active Record</a>》</li><li class="recentcomments"><a href="http://www.400hao.cn/" rel="external nofollow" class="url">宁卫</a> 发表在《<a href="http://rubyer.me/blog/461/comment-page-1#comment-1153">非WEB程序中使用Active Record</a>》</li><li class="recentcomments"><a href="http://www.400hao.cn/" rel="external nofollow" class="url">宁卫</a> 发表在《<a href="http://rubyer.me/blog/461/comment-page-1#comment-1152">非WEB程序中使用Active Record</a>》</li><li class="recentcomments">老宋 发表在《<a href="http://rubyer.me/blog/267/comment-page-1#comment-1145">Rails console显示执行的Sql语句</a>》</li></ul></div><div class="widget widget_categories"><h3>文章分类</h3>		<ul>
	<li class="cat-item cat-item-12"><a href="http://rubyer.me/blog/category/linux-mac" title="查看 Linux/Mac 下的所有文章">Linux/Mac</a> (18)
</li>
	<li class="cat-item cat-item-6"><a href="http://rubyer.me/blog/category/rails" title="查看 Rails 下的所有文章">Rails</a> (57)
</li>
	<li class="cat-item cat-item-13"><a href="http://rubyer.me/blog/category/ruby-install" title="查看 ROR安装 下的所有文章">ROR安装</a> (16)
</li>
	<li class="cat-item cat-item-3"><a href="http://rubyer.me/blog/category/ruby" title="查看 Ruby 下的所有文章">Ruby</a> (47)
</li>
	<li class="cat-item cat-item-103"><a href="http://rubyer.me/blog/category/ruby-diary" title="查看 一日一技 下的所有文章">一日一技</a> (15)
</li>
	<li class="cat-item cat-item-1"><a href="http://rubyer.me/blog/category/no" title="查看 其它 下的所有文章">其它</a> (16)
</li>
		</ul>
</div><div class="widget widget_links"><h3>我的朋友</h3>
	<ul class="xoxo blogroll">
<li><a href="http://hisea.me/" title="远在多伦多的Ruby，Rails高手" target="_blank">Hisea</a></li>
<li><a href="http://www.kennx.net/" title="KennX – 宝石之力">KennX – 宝石之力</a></li>
<li><a href="http://miclle.com/" title="Miclle’s posts">Miclle's posts</a></li>
<li><a href="http://rubyeye.net/" target="_blank">Ruby中文站</a></li>
<li><a href="http://serholiu.com/" title="SErHo的博客">SErHo's Blog</a></li>
<li><a href="http://www.nanjingui.com/" title="南京UI设计">南京UI设计</a></li>
<li><a href="http://www.wuhao.me/">吴昊个人博客</a></li>
<li><a href="http://xiaoneit.com/" title="一个北京百度的朋友" target="_blank">坚持就是胜利</a></li>
<li><a href="http://www.506c.com/" target="_blank">够戏网</a></li>
<li><a href="http://www.kdefan.com/" target="_blank">天空之城</a></li>

	</ul>
</div>

<!-- showcase 2 -->

</div>
<!-- sidebar END -->

	<div class="fixed"></div>

	<!-- footer START -->
	<div id="footer">
		<div id="about">
			Powered by <a href="http://wordpress.org/">WordPress</a>			 | Theme by <a href="http://www.neoease.com/">NeoEase</a>			 | Owned by <a href="http://rubyer.me/about">老宋</a>		</div>
		<ul id="admin">
			<li><a href="http://rubyer.me/wp-login.php?action=register">注册</a></li>			<li><a href="http://rubyer.me/wp-login.php">登录</a></li>
			<li id="gotop"><a href="http://rubyer.me/#" onclick="MGJS.goTop();return false;">置顶</a></li>
		</ul>
		<div class="fixed"></div>
	</div>
	<!-- footer END -->

</div>
<!-- content END -->

		</div><!-- container -->
	</div><!-- wrap -->



<!-- Dynamic page generated in 0.661 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2012-04-07 12:27:01 -->
<!-- Compression = gzip -->
</div>



</body></html>
